<app-menu></app-menu>
<div class="card">
  <form
    [formGroup]="livreForm"
    (ngSubmit)="onSubmitFormGroupe()"
    *ngIf="livreForm"
    enctype="multipart/form-data"
  >
    <div class="card-header">
      <h4 class="card-title">Nouveau livre</h4>
    </div>

    <div class="card-body">
      <div class="form-group">
        <label for="titre">Titre:</label>
        <input
          type="text"
          [ngClass]="{
            'is-valid': validForm && !livreForm.controls['titre'].errors,
            'is-invalid': validForm && livreForm.controls['titre'].errors
          }"
          class="form-control"
          id="titre"
          formControlName="titre"
          placeholder="titre"
          name="titre"
          ngModel
        />
        <div class="invalid-feedback">Titre obligatoire !</div>
      </div>
      <div class="form-group">
        <label for="auteur">Auteur:</label>
        <input
          type="text"
          [ngClass]="{
            'is-valid': validForm && !livreForm.controls['auteur'].errors,
            'is-invalid': validForm && livreForm.controls['auteur'].errors
          }"
          class="form-control"
          id="auteur"
          formControlName="auteur"
          placeholder="auteur"
          name="auteur"
          ngModel
        />
        <div class="invalid-feedback">Auteur obligatoire !</div>
      </div>
      <div class="form-group">
        <label>Selectionner la catégorie</label>
        <select
          name="categorie"
          class="form-select form-select-lg mb-3"
          class="form-control"
          id="categorie"
          name="categorie"
          formControlName="categorie"
          ngModel
        >
          <option *ngFor="let c of categories">{{ c.nomCategorie }}</option>
        </select>
        <div class="invalid-feedback">Catégorie obligatoire !</div>
      </div>
      <div class="form-group">
        <label for="description">Description:</label>
        <textarea
          rows="4"
          cols="50"
          type="text"
          [ngClass]="{
            'is-valid': validForm && !livreForm.controls['description'].errors,
            'is-invalid': validForm && livreForm.controls['description'].errors
          }"
          class="form-control"
          id="description"
          formControlName="description"
          placeholder="description"
          name="description"
          ngModel
        ></textarea>
        <div class="invalid-feedback">Description obligatoire !</div>
      </div>
      <div class="form-group">
          <label class="btn btn-default p-0">
            <input type="file" 
            (change)="onSelectFile($event)" 
            class="form-control" id="file"/>
          </label>
      </div>
    </div>

    <div class="card-footer mt-3">
      <div class="d-flex justify-content-between">
        <button type="submit" class="btn btn-primary">Ajouter</button>
        <button class="btn btn-primary" type="submit" routerLink="/admin/livre">
          Liste des livres
        </button>
      </div>
    </div>
  </form>
</div>
